{"ts":1361923652148,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1361923693353,"patch":[[{"diffs":[[1,"/**\r\n * @author      SÃ©bastien Bolduc    <sebastien.bolduc@gmail.com>\r\n * @version     0.0                 (current version number of program)\r\n * @since       2013-02-26          (the version of the package this class was first added to)\r\n */\r\n\r\n// requires node's\r\nvar app = require('http').createServer(handler)\r\n, io = require('socket.io').listen(app)\r\n, fs = require('fs')\r\n\r\napp.listen(process.env.PORT || 8001);\r\n\r\nfunction handler (req, res) {\r\n    fs.readFile('test/starFighter/default.html',\r\n        function (err, data) {\r\n            if (err) {\r\n            res.writeHead(500);\r\n            return res.end('Error loading index.html');\r\n        }\r\n\r\n        res.writeHead(200, {'Content-Type': 'text/html', \"Content-Length\": data.length});   \r\n        res.end(data);\r\n    });\r\n}\r\n\r\nio.sockets.on('connection', function (socket) {\r\n    // echo the message\r\n    socket.on('message', function (data) {\r\n        console.info(data);\r\n        socket.send(\"[ECHO] \"+data);\r\n    });\r\n});"]],"start1":0,"start2":0,"length1":0,"length2":991}]],"length":991,"saved":false}
{"ts":1361927072157,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"io.sockets.on('connection', function (socket) {\r\n    // echo the message\r\n    socket.on('message', function (data) {\r\n        console.info(data);\r\n        socket.send(\"[ECHO] \"+data);\r\n    }"],[1,"var player = 0;\r\nvar socketBoard = [];\r\n\r\n// create the player\r\nio.sockets.on('connection', function (socket) {\r\n    socketBoard[player].push(socket);\r\n    socket.send(player++);\r\n    \r\n    socket.on('message', function (data) {\r\n        var element = data.split(\" \");\r\n        socketBoard[parseInt(element[0])].send(element[1]);\r\n    });\r\n    \r\n});\r\n\r\n// destroy the player\r\nio.socket.on('disconnect', function(socket) {\r\n    player.splice(player.indexOf(socket)"],[0,");\r\n})"],[-1,";"]],"start1":790,"start2":790,"length1":201,"length2":473}]],"length":1263,"saved":false}
{"ts":1361927333900,"patch":[[{"diffs":[[0,"++);\r\n    \r\n"],[1,"    // send message to a player\r\n"],[0,"    socket.o"]],"start1":968,"start2":968,"length1":24,"length2":57},{"diffs":[[0,"ard["],[-1,"parseInt"],[1,"Number"],[0,"(ele"]],"start1":1113,"start2":1113,"length1":16,"length2":14},{"diffs":[[0,"   });\r\n"],[-1,"    \r\n"],[0,"});\r\n\r\n/"]],"start1":1157,"start2":1157,"length1":22,"length2":16},{"diffs":[[0,"    "],[-1,"player.splice(player"],[1,"socketBoard.splice(socketBoard"],[0,".ind"]],"start1":1242,"start2":1242,"length1":28,"length2":38},{"diffs":[[0,"ocket));\r\n})"],[1,";"]],"start1":1286,"start2":1286,"length1":12,"length2":13}]],"length":1299,"saved":false}
{"ts":1361927432766,"patch":[[{"diffs":[[0,"    "],[-1,"socketBoard[Number(element[0])].send(element[1]);"],[1,"\r\n        if (socketBoard[Number(element[0])]) {\r\n            socketBoard[Number(element[0])].send(element[1]);\r\n        } else {\r\n            socket.send(\"No other player...\");\r\n        }"],[0,"\r\n  "]],"start1":1101,"start2":1101,"length1":57,"length2":196}]],"length":1438,"saved":false}
{"ts":1361927736189,"patch":[[{"diffs":[[0,"r\r\nio.socket"],[1,"s"],[0,".on('disconn"]],"start1":1331,"start2":1331,"length1":24,"length2":25}]],"length":1439,"saved":false}
{"ts":1361927857693,"patch":[[{"diffs":[[0,"cket);\r\n    "],[1,"//"],[0,"socket.send("]],"start1":938,"start2":938,"length1":24,"length2":26}]],"length":1441,"saved":false}
{"ts":1361927928500,"patch":[[{"diffs":[[0,"oard"],[-1,"[player]"],[0,".pus"]],"start1":918,"start2":918,"length1":16,"length2":8}]],"length":1433,"saved":false}
{"ts":1361927932103,"patch":[[{"diffs":[[0,");\r\n    "],[-1,"//"],[0,"socket.s"]],"start1":934,"start2":934,"length1":18,"length2":16}]],"length":1431,"saved":false}
{"ts":1361928238062,"patch":[[{"diffs":[[0,"ement[1]"],[1," + \" \" + element[2]"],[0,");\r\n    "]],"start1":1198,"start2":1198,"length1":16,"length2":35}]],"length":1450,"saved":false}
{"ts":1361928897991,"patch":[[{"diffs":[[0,"(socket));\r\n"],[1,"    player--;\r\n"],[0,"});"]],"start1":1435,"start2":1435,"length1":15,"length2":30}]],"length":1465,"saved":false}
{"ts":1361929234697,"patch":[[{"diffs":[[0,")].send("],[1,"\"position\" + "],[0,"element["]],"start1":1188,"start2":1188,"length1":16,"length2":29}]],"length":1478,"saved":false}
{"ts":1361929242964,"patch":[[{"diffs":[[0,"position"],[1," "],[0,"\" + elem"]],"start1":1197,"start2":1197,"length1":16,"length2":17}]],"length":1479,"saved":false}
{"ts":1361930949810,"patch":[[{"diffs":[[0,");\r\n"],[-1,"});\r\n\r\n"],[1,"    \r\n    "],[0,"// d"]],"start1":1325,"start2":1325,"length1":15,"length2":18},{"diffs":[[0,"the player\r\n"],[-1,"io."],[1,"    "],[0,"socket"],[-1,"s"],[0,".on('disconn"]],"start1":1350,"start2":1350,"length1":34,"length2":34},{"diffs":[[0,"tion(socket) {\r\n"],[1,"    "],[0,"    socketBoard."]],"start1":1394,"start2":1394,"length1":32,"length2":36},{"diffs":[[0,"(socket));\r\n"],[1,"    "],[0,"    player--"]],"start1":1456,"start2":1456,"length1":24,"length2":28},{"diffs":[[0,"yer--;\r\n"],[1,"    });\r\n"],[0,"});"]],"start1":1479,"start2":1479,"length1":11,"length2":20}]],"length":1499,"saved":false}
{"ts":1361931498890,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"app.listen(process.env.PORT || 8001);\r\n"],[1,"// make the server listen to this port\r\napp.listen(process.env.PORT || 8001);\r\n\r\n/**\r\n * Handle an HTTP request.\r\n * \r\n * @param req Request.\r\n * @param res Response.\r\n * @return\r\n */"],[0,"\r\nfu"]],"start1":377,"start2":377,"length1":47,"length2":191}]],"length":1643,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362112200314,"patch":[[{"diffs":[[0,"nt[0])]) {\r\n"],[1,"            switch (element[1]) {\r\n                case \"position\":\r\n        "],[0,"            "]],"start1":1279,"start2":1279,"length1":24,"length2":101},{"diffs":[[0,"element["],[-1,"1"],[1,"2"],[0,"] + \" \" "]],"start1":1431,"start2":1431,"length1":17,"length2":17},{"diffs":[[0,"ent["],[-1,"2]);"],[1,"3]);\r\n                    break;\r\n                default:\r\n                    socketBoard[Number(element[0])].send(\"message \" + element[2]);       \r\n            }"],[0,"\r\n  "]],"start1":1454,"start2":1454,"length1":12,"length2":172}]],"length":1880,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362368415722,"patch":[[{"diffs":[[0,"d = [];\r"],[1,"\nvar onlineList = [];\r"],[0,"\n\r\n// cr"]],"start1":969,"start2":969,"length1":16,"length2":38},{"diffs":[[0,"});\r\n});"],[1,"\r\n\r\n/**\r\n * \r\n */\r\nfunction registerOnlineList(socket) {\r\n    \r\n    \r\n}"]],"start1":1894,"start2":1894,"length1":8,"length2":79}]],"length":1973,"saved":false}
{"ts":1362368556788,"patch":[[{"diffs":[[0," {\r\n    "],[-1,"\r\n    "],[1,"for (var i=0; i<onlineList.length; i++) {\r\n        for (var j=0; j<onlineList.length; j++) {\r\n            if (onlineList[i][j] === null) {\r\n                onlineList[i].push(socket);\r\n                onlineList[i].splice(j,1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    \r\n    onlineList.push([socket, null]);"],[0,"\r\n}"]],"start1":1956,"start2":1956,"length1":17,"length2":340}]],"length":2296,"saved":false}
{"ts":1362368941031,"patch":[[{"diffs":[[0,"(socket) {\r\n"],[1,"    // match with somebody already online\r\n"],[0,"    for (var"]],"start1":1948,"start2":1948,"length1":24,"length2":67},{"diffs":[[0,"=0; j<onlineList"],[1,"[i]"],[0,".length; j++) {\r"]],"start1":2068,"start2":2068,"length1":32,"length2":35},{"diffs":[[0,"   }\r\n    \r\n"],[1,"    // create a new match\r\n"],[0,"    onlineLi"]],"start1":2291,"start2":2291,"length1":24,"length2":51},{"diffs":[[0,", null]);\r\n}"],[1,"\r\n\r\n/**\r\n * \r\n */\r\nfunction unregisterOnlineList(socket) {\r\n    for (var i=0; i<onlineList.length; i++) {\r\n        var element = onlineList[i].indexOf(socket);\r\n        if (element != -1) {\r\n            \r\n            return;\r\n        }\r\n    }     \r\n}"]],"start1":2357,"start2":2357,"length1":12,"length2":262}]],"length":2619,"saved":false}
{"ts":1362369971039,"patch":[[{"diffs":[[0,"\n});\r\n\r\n/**\r\n * "],[-1,""],[0,""],[1,"Register a new connection to the online list and match it with somebody else\r\n * if it is possible.\r\n * \r\n * @param socket Socket responsible for the connection.\r\n * @return Position of the match in the online list."],[0,"\r\n */\r\nfunction "]],"start1":1898,"start2":1898,"length1":32,"length2":247},{"diffs":[[0,"lice(j,1);\r\n"],[1,"                \r\n"],[0,"            "]],"start1":2442,"start2":2442,"length1":24,"length2":42},{"diffs":[[0,"          return"],[1," i"],[0,";\r\n            }"]],"start1":2478,"start2":2478,"length1":32,"length2":34},{"diffs":[[0,");\r\n"],[-1,"}\r\n\r\n/**\r\n * "],[1,"    return (onlineList.length - 1);\r\n}\r\n\r\n/**\r\n * Unregister a connection from the online list.\r\n * \r\n * @param socket Socket responsible for the connection.\r\n * @return"],[0,"\r\n *"]],"start1":2599,"start2":2599,"length1":21,"length2":177},{"diffs":[[0," {\r\n            "],[-1,""],[0,""],[1,"for (var j=0; j<onlineList[i].length; j++) {\r\n                if (j != element) {\r\n                    onlineList[i][j].send(\"Online budy disconnected...\");  \r\n                }\r\n            } \r\n            onlineList[i][element] = null;"],[0,"\r\n            re"]],"start1":2947,"start2":2947,"length1":32,"length2":269}]],"length":3247,"saved":false}
{"ts":1362370110285,"patch":[[{"diffs":[[0,"    "],[-1,"onlineList[i].push(socket);"],[1,"for (var k=0; k<onlineList[i].length; k++) {\r\n                    if (onlineList[i][k] !== null) {\r\n                        onlineList[i][k].send(\"Online budy connected...\");  \r\n                    }\r\n                }"],[0,"\r\n  "]],"start1":2377,"start2":2377,"length1":35,"length2":226},{"diffs":[[0,"[i]."],[-1,"splice(j,1"],[1,"push(socket"],[0,");\r\n"]],"start1":2627,"start2":2627,"length1":18,"length2":19},{"diffs":[[0,"                "],[1,"onlineList[i].splice(j,1); "],[0,"\r\n              "]],"start1":2646,"start2":2646,"length1":32,"length2":59}]],"length":3466,"saved":false}
{"ts":1362370140185,"patch":[[{"diffs":[[0,"budy connect"],[-1,"ed"],[1,"ing"],[0,"...\");  \r\n  "]],"start1":2535,"start2":2535,"length1":26,"length2":27}]],"length":3467,"saved":false}
{"ts":1362370200058,"patch":[[{"diffs":[[0,"if ("],[-1,"onlineList[i][k]"],[1,"k"],[0," !== "],[-1,"null"],[1,"j"],[0,") {\r"]],"start1":2447,"start2":2447,"length1":33,"length2":15}]],"length":3449,"saved":false}
{"ts":1362370291967,"patch":[[{"diffs":[[0,"\r\n\r\n"],[-1,"var player = 0;\r\nvar socketBoard = [];\r\n"],[0,"var "]],"start1":934,"start2":934,"length1":48,"length2":8},{"diffs":[[0," = [];\r\n"],[1,""],[0,"\r\n// cre"]],"start1":952,"start2":952,"length1":16,"length2":16},{"diffs":[[0,"    "],[-1,"socketBoard.push(socket);\r\n    socket.send(player++"],[1,"registerOnlineList(socket"],[0,");\r\n"]],"start1":1033,"start2":1033,"length1":59,"length2":33},{"diffs":[[0,"ge to a player\r\n"],[-1,""],[0,"    "],[1,"/*"],[0,"socket.on('messa"]],"start1":1089,"start2":1089,"length1":36,"length2":38},{"diffs":[[0,"\n    });"],[1,"*/"],[0,"\r\n    \r\n"]],"start1":1658,"start2":1658,"length1":16,"length2":18},{"diffs":[[0,"    "],[-1,"socketBoard.splice(socketBoard.indexOf(socket));\r\n        player--"],[1,"unregisterOnlineList(socket)"],[0,";\r\n "]],"start1":1755,"start2":1755,"length1":74,"length2":36}]],"length":3349,"saved":false}
{"ts":1362371155409,"patch":[[{"diffs":[[0,") {\r\n   "],[1," var matchID ="],[0," registe"]],"start1":1028,"start2":1028,"length1":16,"length2":30},{"diffs":[[0,"o a player\r\n"],[1,"    socket.on('message', function (data) {\r\n        var obj = JSON.parse(data);\r\n        \r\n        \r\n    });\r\n"],[0,"    /*socket"]],"start1":1107,"start2":1107,"length1":24,"length2":134},{"diffs":[[0,"(socket) {\r\n"],[1,"    var data = \"\";\r\n    \r\n"],[0,"    // match"]],"start1":2187,"start2":2187,"length1":24,"length2":50},{"diffs":[[0,"    "],[-1,"onlineList[i][k].send(\"Online budy connecting...\""],[1,"data = JSON.stringify({\"match\":i, \"message\":\"Online budy connecting...\"});\r\n                        onlineList[i][k].send(data"],[0,");  "]],"start1":2533,"start2":2533,"length1":57,"length2":134},{"diffs":[[0,"    "],[-1,"return i;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // create a new match\r\n    onlineList.push([socket, null]);\r\n    return (onlineList.length - 1"],[1,"data = JSON.stringify({\"match\":i, \"message\":\"You are connected...with someone\"});\r\n                socket.send(data);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    \r\n    // create a new match\r\n    onlineList.push([socket, null]);\r\n    data = JSON.stringify({\"match\":(onlineList.length - 1), \"message\":\"You are connected...\"});\r\n    socket.send(data"],[0,");\r\n"]],"start1":2813,"start2":2813,"length1":156,"length2":373},{"diffs":[[0,"(socket) {\r\n"],[1,"    var data = \"\";\r\n    \r\n"],[0,"    for (var"]],"start1":3354,"start2":3354,"length1":24,"length2":50},{"diffs":[[0,"    "],[-1,"onlineList[i][j].send(\"Online budy disconnected...\""],[1,"data = JSON.stringify({\"match\":i, \"message\":\"Online budy disconnected...\"});\r\n                    onlineList[i][j].send(data"],[0,");  "]],"start1":3634,"start2":3634,"length1":59,"length2":132}]],"length":3892,"saved":false}
{"ts":1362371170935,"patch":[[{"diffs":[[0,"er\r\n"],[-1,"    socket.on('message', function (data) {\r\n        var obj = JSON.parse(data);\r\n        \r\n        \r\n    });\r\n"],[0,"    "]],"start1":1115,"start2":1115,"length1":118,"length2":8}]],"length":3782,"saved":false}
{"ts":1362371205408,"patch":[[{"diffs":[[0,"\n   "],[-1," var matchID ="],[0," reg"]],"start1":1032,"start2":1032,"length1":22,"length2":8}]],"length":3768,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362372921307,"patch":[[{"diffs":[[0,"re('fs')"],[1,";"],[0,"\r\n\r\n// m"]],"start1":369,"start2":369,"length1":16,"length2":17}]],"length":3769,"saved":false}
{"ts":1362373297088,"patch":[[{"diffs":[[0," \"\";\r\n    \r\n"],[1,"    console.log(\"unregistering!!!\");\r\n"],[0,"    for (var"]],"start1":3257,"start2":3257,"length1":24,"length2":62}]],"length":3807,"saved":false}
{"ts":1362373564908,"patch":[[{"diffs":[[0,"       }"],[-1," "],[1,"\r\n            console.log(\"remove...\");"],[0,"\r\n      "]],"start1":3707,"start2":3707,"length1":17,"length2":55}]],"length":3845,"saved":false}
{"ts":1362373846882,"patch":[[{"diffs":[[0,"dexOf(socket);\r\n"],[1,"        console.log(element);\r\n"],[0,"        if (elem"]],"start1":3392,"start2":3392,"length1":32,"length2":63}]],"length":3876,"saved":false}
{"ts":1362374756199,"patch":[[{"diffs":[[0,"t = [];\r"],[1,"\nvar onlineListSocket = [];\r"],[0,"\n\r\n// cr"]],"start1":952,"start2":952,"length1":16,"length2":44},{"diffs":[[0,"i][j] =="],[-1,"= null"],[1," -1"],[0,") {\r\n   "]],"start1":2301,"start2":2301,"length1":22,"length2":19},{"diffs":[[0,"                "],[1,"onlineListSocket["],[0,"onlineList[i][k]"]],"start1":2523,"start2":2523,"length1":32,"length2":49},{"diffs":[[0,"st[i][k]"],[1,"]"],[0,".send(da"]],"start1":2564,"start2":2564,"length1":16,"length2":17},{"diffs":[[0,"lineList"],[-1,"[i]"],[1,"Socket"],[0,".push(so"]],"start1":2649,"start2":2649,"length1":19,"length2":22},{"diffs":[[0,"t[i]"],[-1,".splice(j,"],[1,"[j] = (onlineListSocket.length - "],[0,"1); "]],"start1":2704,"start2":2704,"length1":18,"length2":41},{"diffs":[[0,"List"],[1,"Socket"],[0,".push("],[-1,"["],[0,"socket"],[-1,", null"],[1,");\r\n    onlineList.push([(onlineListSocket.length - 1), -1"],[0,"]);\r"]],"start1":2983,"start2":2983,"length1":27,"length2":84}]],"length":4002,"saved":false}
{"ts":1362375553688,"patch":[[{"diffs":[[0,"[];\r"],[-1,"\nvar onlineListSocket = [];\r"],[0,"\n\r\n/"]],"start1":956,"start2":956,"length1":36,"length2":8},{"diffs":[[0,"[j] "],[1,"!"],[0,"== "],[-1,"-1"],[1,"null"],[0,") {\r"]],"start1":2275,"start2":2275,"length1":13,"length2":16},{"diffs":[[0,"    "],[-1,"onlineListSocket["],[0,"onli"]],"start1":2510,"start2":2510,"length1":25,"length2":8},{"diffs":[[0,"st[i][k]"],[-1,"]"],[0,".send(da"]],"start1":2522,"start2":2522,"length1":17,"length2":16},{"diffs":[[0,"      onlineList"],[-1,"Socket"],[1,"[i]"],[0,".push(socket);\r\n"]],"start1":2598,"start2":2598,"length1":38,"length2":35},{"diffs":[[0,"t[i]"],[-1,"[j] = (onlineListSocket.length -"],[1,".splice(j,"],[0," 1);"]],"start1":2658,"start2":2658,"length1":40,"length2":18}]],"length":3934,"saved":false}
{"ts":1362375615424,"patch":[[{"diffs":[[0,"t[i][j] "],[-1,"!"],[1,"="],[0,"== null)"]],"start1":2271,"start2":2271,"length1":17,"length2":17},{"diffs":[[0,"(k !== j"],[1," && onlineList[i][k] !== null"],[0,") {\r\n   "]],"start1":2377,"start2":2377,"length1":16,"length2":45}]],"length":3963,"saved":false}
{"ts":1362375655897,"patch":[[{"diffs":[[0,"List"],[-1,"Socket"],[0,".push("],[1,"["],[0,"socket"],[-1,");\r\n    onlineList.push([(onlineListSocket.length - 1), -1"],[1,", null"],[0,"]);\r"]],"start1":2944,"start2":2944,"length1":84,"length2":27}]],"length":3906,"saved":false}
{"ts":1362375952351,"patch":[[{"diffs":[[0,"    "],[-1,"var element = onlineList[i].indexOf(socket);\r\n        console.log(element);\r\n"],[1,"for (var j=0; j<onlineList[i].length; j++) {\r\n       "],[0,"     "],[-1,"   "],[0,"if ("],[-1,"element != -1"],[1,"onlineList[i][j].sessionId == socket.sessionId"],[0,") {\r\n"],[1,"    "],[0,"    "]],"start1":3388,"start2":3388,"length1":115,"length2":125},{"diffs":[[0,"       for (var "],[-1,"j"],[1,"k"],[0,"=0; "],[-1,"j"],[1,"k"],[0,"<onlineList[i].l"]],"start1":3514,"start2":3514,"length1":38,"length2":38},{"diffs":[[0,"List[i].length; "],[-1,"j"],[1,"k"],[0,"++) {\r\n         "]],"start1":3543,"start2":3543,"length1":33,"length2":33},{"diffs":[[0,"    "],[1,"  "],[1,"  "],[0,"if ("],[-1,"j"],[1,"k"],[0," != "],[-1,"element"],[1,"j"],[0,") {\r\n"],[1,"    "],[0,"    "]],"start1":3579,"start2":3579,"length1":29,"length2":31},{"diffs":[[0,"                "],[1,"  "],[1,"  "],[0,"onlineList[i][j]"]],"start1":3708,"start2":3708,"length1":32,"length2":36},{"diffs":[[0,"lineList[i]["],[-1,"j"],[1,"k"],[0,"].send(data)"]],"start1":3730,"start2":3730,"length1":25,"length2":25},{"diffs":[[0,"                "],[-1,"}\r\n"],[1,"    }\r\n    "],[0,"            }\r\n "]],"start1":3760,"start2":3760,"length1":35,"length2":43},{"diffs":[[0,"            "],[1,"    "],[0,"console.log("]],"start1":3802,"start2":3802,"length1":24,"length2":28},{"diffs":[[0,");\r\n            "],[1,"    "],[0,"onlineList[i][el"]],"start1":3841,"start2":3841,"length1":32,"length2":36},{"diffs":[[0,"List[i]["],[-1,"element"],[1,"j"],[0,"] = null"]],"start1":3867,"start2":3867,"length1":23,"length2":17},{"diffs":[[0,"l;\r\n            "],[1,"    "],[0,"return;\r\n       "]],"start1":3883,"start2":3883,"length1":32,"length2":36},{"diffs":[[0,"       return;\r\n"],[1,"            }\r\n"],[0,"        }\r\n    }"]],"start1":3896,"start2":3896,"length1":32,"length2":47}]],"length":3951,"saved":false}
{"ts":1362375997965,"patch":[[{"diffs":[[0," (k != j"],[1," && onlineList[i][k] !== null"],[0,") {\r\n   "]],"start1":3589,"start2":3589,"length1":16,"length2":45}]],"length":3980,"saved":false}
{"ts":1362376372792,"patch":[[{"diffs":[[0,"ssionId "],[1,"!== null && onlineList[i][j].sessionId "],[0,"== socke"]],"start1":3473,"start2":3473,"length1":16,"length2":55}]],"length":4019,"saved":false}
{"ts":1362376621649,"patch":[[{"diffs":[[0,"st[i][j]"],[-1,".sessionId"],[0," !== nul"]],"start1":3462,"start2":3462,"length1":26,"length2":16}]],"length":4009,"saved":false}
{"ts":1362377234247,"patch":[[{"diffs":[[0," null;\r\n"],[1,"                console.log(\"size: \" + onlineList.length);\r\n"],[0,"        "]],"start1":3937,"start2":3937,"length1":16,"length2":76}]],"length":4069,"saved":false}
{"ts":1362377459915,"patch":[[{"diffs":[[0,"l;\r\n"],[-1,"                console.log(\"size: \" + onlineList.length);\r\n"],[0,"    "]],"start1":3941,"start2":3941,"length1":68,"length2":8}]],"length":4009,"saved":false}
{"ts":1362377595925,"patch":[[{"diffs":[[0,"neList[i][k]"],[-1," !== null"],[0,") {\r\n       "]],"start1":2393,"start2":2393,"length1":33,"length2":24}]],"length":4000,"saved":false}
{"ts":1362377712435,"patch":[[{"diffs":[[0,"st[i][k]"],[-1," !== null"],[0,") {\r\n   "]],"start1":3629,"start2":3629,"length1":25,"length2":16}]],"length":3991,"saved":false}
{"ts":1362377962649,"patch":[[{"diffs":[[0,"][j]"],[-1," !== null"],[0," && "]],"start1":3457,"start2":3457,"length1":17,"length2":8}]],"length":3982,"saved":false}
{"ts":1362378246550,"patch":[[{"diffs":[[0," }\r\n"],[-1,"                onlineList[i].push(socket);\r\n"],[0,"    "]],"start1":2604,"start2":2604,"length1":53,"length2":8},{"diffs":[[0,"ice(j, 1"],[1,", socket"],[0,"); \r\n   "]],"start1":2641,"start2":2641,"length1":16,"length2":24}]],"length":3945,"saved":false}
{"ts":1362378431793,"patch":[[{"diffs":[[0,"            if ("],[1,"!"],[0,"onlineList[i][j]"]],"start1":2246,"start2":2246,"length1":32,"length2":33},{"diffs":[[0,"][j]"],[-1," === null"],[0,") {\r"]],"start1":2275,"start2":2275,"length1":17,"length2":8}]],"length":3937,"saved":false}
{"ts":1362379078266,"patch":[[{"diffs":[[0," {\r\n"],[-1,"            if (!onlineList[i][j]) {\r\n    "],[0,"    "]],"start1":2242,"start2":2242,"length1":50,"length2":8},{"diffs":[[0,"                "],[-1,"    "],[0,"if (k !== j && o"]],"start1":2304,"start2":2304,"length1":36,"length2":32},{"diffs":[[0,"== j"],[-1," && onlineList[i][k]"],[0,") {\r\n"],[-1,"    "],[0,"    "]],"start1":2327,"start2":2327,"length1":37,"length2":13},{"diffs":[[0,"                "],[-1,"    "],[0,"onlineList[i][k]"]],"start1":2436,"start2":2436,"length1":36,"length2":32},{"diffs":[[0,"                "],[-1,"    "],[0,"}\r\n             "]],"start1":2484,"start2":2484,"length1":36,"length2":32},{"diffs":[[0,"            "],[-1,"  "],[-1,"  "],[0,"}\r\n"],[-1,"    "],[0,"            "]],"start1":2503,"start2":2503,"length1":35,"length2":27},{"diffs":[[0,"[i]."],[-1,"splice(j, 1, "],[1,"push("],[0,"sock"]],"start1":2540,"start2":2540,"length1":21,"length2":13},{"diffs":[[0,"ket); \r\n"],[-1,"    "],[0,"        "]],"start1":2552,"start2":2552,"length1":20,"length2":16},{"diffs":[[0,");\r\n            "],[-1,"    "],[0,"socket.send(data"]],"start1":2651,"start2":2651,"length1":36,"length2":32},{"diffs":[[0,");\r\n            "],[-1,"    "],[0,"return;\r\n       "]],"start1":2683,"start2":2683,"length1":36,"length2":32},{"diffs":[[0,"   return;\r\n"],[-1,"            }\r\n"],[0,"        }\r\n "]],"start1":2696,"start2":2696,"length1":39,"length2":24},{"diffs":[[0,"cket"],[-1,", null"],[0,""],[1,""],[0,"]);\r"]],"start1":2782,"start2":2782,"length1":14,"length2":8},{"diffs":[[0,"][j]"],[-1," && onlineList[i][j]"],[0,""],[1,""],[0,".ses"]],"start1":3285,"start2":3285,"length1":28,"length2":8},{"diffs":[[0,"!= j"],[-1," && onlineList[i][k]"],[0,""],[1,""],[0,") {\r"]],"start1":3412,"start2":3412,"length1":28,"length2":8},{"diffs":[[0,"t[i]"],[-1,"[j] = null"],[1,".splice(j, 1)"],[0,";\r\n "]],"start1":3689,"start2":3689,"length1":18,"length2":21}]],"length":3773,"saved":false}
{"ts":1362379188687,"patch":[[{"diffs":[[0," {\r\n"],[-1,"                if (k !== j) {\r\n    "],[0,"    "]],"start1":2300,"start2":2300,"length1":44,"length2":8},{"diffs":[[0,"                "],[-1,"    "],[0,"onlineList[i][k]"]],"start1":2396,"start2":2396,"length1":36,"length2":32},{"diffs":[[0,"ta);  \r\n"],[-1,"                }\r\n"],[0,"        "]],"start1":2436,"start2":2436,"length1":35,"length2":16}]],"length":3714,"saved":false}
{"ts":1362379242207,"patch":[[{"diffs":[[0,"                "],[1,"console.log(\"remove...\");\r\n                onlineList[i].splice(j, 1);\r\n                "],[0,"for (var k=0; k<"]],"start1":3265,"start2":3265,"length1":32,"length2":120},{"diffs":[[0," k++"],[-1,") {\r\n                    if (k != j"],[0,") {\r\n"],[-1,"    "],[0,"    "]],"start1":3406,"start2":3406,"length1":52,"length2":13},{"diffs":[[0,"                "],[-1,"    "],[0,"onlineList[i][k]"]],"start1":3517,"start2":3517,"length1":36,"length2":32},{"diffs":[[0,"    "],[-1,"    }\r\n                }\r\n                console.log(\"remove...\");\r\n                onlineList[i].splice(j, 1);"],[1,"}"],[0,"\r\n  "]],"start1":3577,"start2":3577,"length1":120,"length2":9}]],"length":3648,"saved":false}
{"ts":1362379637854,"patch":[[{"diffs":[[0,"             }\r\n"],[1,"                if (onlineList[i].length === 0) {\r\n                    onlineList.splice(i, 1);\r\n                }\r\n"],[0,"                "]],"start1":3568,"start2":3568,"length1":32,"length2":148}]],"length":3764,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362457039300,"patch":[[{"diffs":[[0,";\r\n}\r\n\r\n"],[1,"var maxPerMatch = 2;\r\n"],[0,"var onli"]],"start1":931,"start2":931,"length1":16,"length2":38},{"diffs":[[0,"urn "],[-1,"Position of the match in the online list."],[0,""],[1,""],[0,"\r\n *"]],"start1":2007,"start2":2007,"length1":49,"length2":8},{"diffs":[[0,"        "],[-1,"for (var j=0; j<"],[1,"if (onlineList[i].length > 0 && "],[0,"onlineLi"]],"start1":2173,"start2":2173,"length1":32,"length2":48},{"diffs":[[0,"neList[i].length"],[-1,"; j++"],[1," < maxPerMatch"],[0,") {\r\n           "]],"start1":2217,"start2":2217,"length1":37,"length2":46},{"diffs":[[0,"       for (var "],[-1,"k"],[1,"j"],[0,"=0; "],[-1,"k"],[1,"j"],[0,"<onlineList[i].l"]],"start1":2257,"start2":2257,"length1":38,"length2":38},{"diffs":[[0,"List[i].length; "],[-1,"k"],[1,"j"],[0,"++) {\r\n         "]],"start1":2286,"start2":2286,"length1":33,"length2":33},{"diffs":[[0,"JSON.stringify({"],[1,"\"type\":\"connection\", "],[0,"\"match\":i, \"mess"]],"start1":2333,"start2":2333,"length1":32,"length2":53},{"diffs":[[0,"  onlineList[i]["],[-1,"k"],[1,"j"],[0,"].send(data);  \r"]],"start1":2437,"start2":2437,"length1":33,"length2":33},{"diffs":[[0,"socket);"],[-1," "],[0,"\r\n"],[1,"            if (onlineList[i].length >= 1) {\r\n    "],[0,"        "]],"start1":2517,"start2":2517,"length1":19,"length2":68},{"diffs":[[0,"JSON.stringify({"],[1,"\"type\":\"connection\", "],[0,"\"match\":i, \"mess"]],"start1":2596,"start2":2596,"length1":32,"length2":53},{"diffs":[[0,"omeone\"});\r\n"],[1,"            } else {\r\n                data = JSON.stringify({\"type\":\"connection\", \"match\":i, \"message\":\"You are connected...\"});\r\n            }\r\n"],[0,"            "]],"start1":2681,"start2":2681,"length1":24,"length2":169}]],"length":4006,"saved":false}
{"ts":1362457166032,"patch":[[{"diffs":[[0,");\r\n"],[-1,"            if (onlineList[i].length >= 1) {\r\n    "],[0,"    "]],"start1":2523,"start2":2523,"length1":58,"length2":8},{"diffs":[[0,");\r\n"],[-1,"            } else {\r\n                data = JSON.stringify({\"type\":\"connection\", \"match\":i, \"message\":\"You are connected...\"});\r\n            }\r\n"],[0,"    "]],"start1":2639,"start2":2639,"length1":153,"length2":8},{"diffs":[[0,"  \r\n"],[-1,"    console.log(\"unregistering!!!\");\r\n"],[0,"    "]],"start1":3102,"start2":3102,"length1":46,"length2":8},{"diffs":[[0," {\r\n"],[-1,"                console.log(\"remove...\");\r\n"],[0,"    "]],"start1":3270,"start2":3270,"length1":51,"length2":8},{"diffs":[[0,"th; k++) {\r\n"],[-1,""],[0,"            "]],"start1":3369,"start2":3369,"length1":24,"length2":24},{"diffs":[[0,"JSON.stringify({"],[1,"\"type\":\"connection\", "],[0,"\"match\":i, \"mess"]],"start1":3408,"start2":3408,"length1":32,"length2":53}]],"length":3751,"saved":false}
{"ts":1362457253356,"patch":[[{"diffs":[[0,"ssionId) {\r\n"],[1,"                // remove from a match\r\n"],[0,"            "]],"start1":3262,"start2":3262,"length1":24,"length2":64},{"diffs":[[0,"             }\r\n"],[1,"                \r\n                // remove from online list if match empty\r\n"],[0,"                "]],"start1":3595,"start2":3595,"length1":32,"length2":109}]],"length":3868,"saved":false}
{"ts":1362457278092,"patch":[[{"diffs":[[0,"ingify({"],[1,"\"type\":\"connection\", "],[0,"\"match\":"]],"start1":2798,"start2":2798,"length1":16,"length2":37}]],"length":3889,"saved":false}
{"ts":1362458810304,"patch":[[{"diffs":[[0,"\n\r\n/"],[-1,"/ create the player"],[1,"**\r\n * Call this function when we have a connection from the outside.\r\n * \r\n * @param\r\n * @return\r\n */"],[0,"\r\nio"]],"start1":982,"start2":982,"length1":27,"length2":110},{"diffs":[[0,"(socket) {\r\n"],[1,"    // create the player\r\n"],[0,"    register"]],"start1":1127,"start2":1127,"length1":24,"length2":50},{"diffs":[[0,"     \r\n}"],[1,"\r\n\r\n/**\r\n * Syncing data with everybody else in the match.\r\n * \r\n * @param socket Socket responsible for the connection.\r\n * @return\r\n */\r\nfunction syncWithOther(socket, data) {\r\n    var syncData = \"\";\r\n    \r\n    for (var i=0; i<onlineList.length; i++) {\r\n        for (var j=0; j<onlineList[i].length; j++) {\r\n            if (onlineList[i][j].sessionId == socket.sessionId && onlineList[i].length > 1) { \r\n                for (var k=0; k<onlineList[i].length; k++) {\r\n                    syncData = JSON.stringify({\"type\":\"sync\", \"match\":i, \"message\":\"Online budy disconnected...\"});\r\n                    onlineList[i][k].send(syncData);  \r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Send a message to other connected with you.\r\n * \r\n * @param socket  Socket responsible for the connection.\r\n * @param message Message to be sent to other.\r\n * @return\r\n */\r\nfunction sendMessageToOther(socket, message) {\r\n    var msgData = \"\";\r\n    \r\n    for (var i=0; i<onlineList.length; i++) {\r\n        for (var j=0; j<onlineList[i].length; j++) {\r\n            if (onlineList[i][j].sessionId == socket.sessionId && onlineList[i].length > 1) { \r\n                for (var k=0; k<onlineList[i].length; k++) {\r\n                    msgData = JSON.stringify({\"type\":\"sync\", \"match\":i, \"message\":message});\r\n                    onlineList[i][k].send(msgData);  \r\n                }\r\n                return;\r\n            }\r\n        }\r\n    }\r\n}"]],"start1":3990,"start2":3990,"length1":8,"length2":1475}]],"length":5465,"saved":false}
{"ts":1362458820003,"patch":[[{"diffs":[[0,"ingify({\"type\":\""],[-1,"sync"],[1,"message"],[0,"\", \"match\":i, \"m"]],"start1":5276,"start2":5276,"length1":36,"length2":39}]],"length":5468,"saved":false}
{"ts":1362459642533,"patch":[[{"diffs":[[0,"* @param"],[-1,""],[0,""],[1," callback A function to callback."],[0,"\r\n * @re"]],"start1":1063,"start2":1063,"length1":16,"length2":49},{"diffs":[[0,"er\r\n    "],[-1,"/*"],[0,"socket.o"]],"start1":1266,"start2":1266,"length1":18,"length2":16},{"diffs":[[0,"var "],[-1,"element = data.split(\" \");\r\n        \r\n        if (socketBoard[Number(element[0])]) {\r\n  "],[1,"obj = JSON.parse(data);\r\n        \r\n        // act depending on the object type\r\n"],[0,"        "],[-1,"  "],[0,"switch ("],[-1,"element[1]"],[1,"obj.type"],[0,") {\r\n"],[-1,"    "],[0,"    "]],"start1":1322,"start2":1322,"length1":133,"length2":117},{"diffs":[[0,"  case \""],[-1,"position"],[1,"sync"],[0,"\":\r\n    "]],"start1":1445,"start2":1445,"length1":24,"length2":20},{"diffs":[[0,"    "],[-1,"    socketBoard[Number(element[0])].send(\"position \" + element[2] + \" \" + element[3]);\r\n    "],[1,"syncWithOther(socket, obj.data);\r\n"],[0,"    "]],"start1":1473,"start2":1473,"length1":100,"length2":42},{"diffs":[[0,"    "],[-1,"    default"],[1,"case \"message\""],[0,":\r\n "]],"start1":1543,"start2":1543,"length1":19,"length2":22},{"diffs":[[0,"    "],[-1,"    socketBoard[Number(element[0])].send(\"message \" + element[2]);       \r\n            }\r\n        } else {\r\n            socket.send(\"No other player...\");"],[1,"sendMessageToOther(socket, obj.message)\r\n                break;\r\n            default:\r\n                socket.send(JSON.stringify({\"type\":\"echo\", \"message\":\"This is an echo...\"}));       "],[0,"\r\n  "]],"start1":1576,"start2":1576,"length1":162,"length2":195},{"diffs":[[0,"\n    });"],[-1,"*/"],[0,""],[1,""],[0,"\r\n    \r\n"]],"start1":1779,"start2":1779,"length1":18,"length2":16},{"diffs":[[0,"i, \""],[-1,"message\":\"Online budy disconnected...\""],[1,"data\":data"],[0,"});\r"]],"start1":4523,"start2":4523,"length1":46,"length2":18}]],"length":5427,"saved":false}
{"ts":1362460195959,"patch":[[{"diffs":[[0," echo..."],[1,"(not a valid type)."],[0,"\"}));   "]],"start1":1747,"start2":1747,"length1":16,"length2":35}]],"length":5446,"saved":false}
{"ts":1362461654292,"patch":[[{"diffs":[[0,"length; k++) {\r\n"],[1,"                    if (k != j) {\r\n    "],[0,"                "]],"start1":5200,"start2":5200,"length1":32,"length2":71},{"diffs":[[0,"                "],[1,"    "],[0,"onlineList[i][k]"]],"start1":5356,"start2":5356,"length1":32,"length2":36},{"diffs":[[0,"nd(msgData);  \r\n"],[1,"                    }\r\n"],[0,"                "]],"start1":5395,"start2":5395,"length1":32,"length2":55}]],"length":5512,"saved":false}
{"ts":1362461826388,"patch":[[{"diffs":[[0,"he connection.\r\n"],[1," * @param data   Sync data to be sent.\r\n"],[0," * @return\r\n */\r"]],"start1":4110,"start2":4110,"length1":32,"length2":72}]],"length":5552,"saved":false}
{"ts":1362462286165,"patch":[[{"diffs":[[0,"length; k++) {\r\n"],[1,"                    if (k != j) {\r\n    "],[0,"                "]],"start1":4496,"start2":4496,"length1":32,"length2":71},{"diffs":[[0,"                "],[1,"    "],[0,"onlineList[i][k]"]],"start1":4644,"start2":4644,"length1":32,"length2":36},{"diffs":[[0,"d(syncData);  \r\n"],[1,"                    }\r\n"],[0,"                "]],"start1":4684,"start2":4684,"length1":32,"length2":55}]],"length":5618,"saved":false}
{"ts":1362462931933,"patch":[[{"diffs":[[0,"ssage\", \"match\":"],[-1,"i"],[1,"k"],[0,", \"message\":mess"]],"start1":5417,"start2":5417,"length1":33,"length2":33}]],"length":5618,"saved":false}
{"ts":1362463113293,"patch":[[{"diffs":[[0,"\"match\":"],[-1,"k"],[1,"j"],[0,", \"messa"]],"start1":5425,"start2":5425,"length1":17,"length2":17}]],"length":5618,"saved":false}
{"ts":1362463312350,"patch":[[{"diffs":[[0,"\"match\":"],[-1,"j"],[1,"i"],[0,", \"messa"]],"start1":5425,"start2":5425,"length1":17,"length2":17}]],"length":5618,"saved":false}
{"ts":1362463347273,"patch":[[{"diffs":[[0,"ction\", \"match\":"],[-1,"i"],[1,"socket.sessionId"],[0,", \"message\":\"You"]],"start1":2690,"start2":2690,"length1":33,"length2":48}]],"length":5633,"saved":false}
{"ts":1362463588962,"patch":[[{"diffs":[[0,"sessionI"],[-1,"d"],[1,"D"],[0,", \"messa"]],"start1":2713,"start2":2713,"length1":17,"length2":17}]],"length":5633,"saved":false}
{"ts":1362463708219,"patch":[[{"diffs":[[0,"ket."],[-1,"sessionID"],[1,"id"],[0,", \"m"]],"start1":2709,"start2":2709,"length1":17,"length2":10}]],"length":5626,"saved":false}
{"ts":1362463773335,"patch":[[{"diffs":[[0,"ch\":"],[-1,"socket.id"],[1,"i"],[0,", \"m"]],"start1":2702,"start2":2702,"length1":17,"length2":9}]],"length":5618,"saved":false}
{"ts":1362463820353,"patch":[[{"diffs":[[0,"eList[i][j]."],[-1,"sessionI"],[1,"i"],[0,"d == socket."]],"start1":3364,"start2":3364,"length1":32,"length2":25},{"diffs":[[0," socket."],[-1,"sessionI"],[1,"i"],[0,"d) {\r\n  "]],"start1":3381,"start2":3381,"length1":24,"length2":17},{"diffs":[[0,"eList[i][j]."],[-1,"sessionI"],[1,"i"],[0,"d == socket."]],"start1":4361,"start2":4361,"length1":32,"length2":25},{"diffs":[[0,"d == socket."],[-1,"sessionI"],[1,"i"],[0,"d && onlineL"]],"start1":4374,"start2":4374,"length1":32,"length2":25},{"diffs":[[0,"t[i][j]."],[-1,"sessionI"],[1,"i"],[0,"d == soc"]],"start1":5161,"start2":5161,"length1":24,"length2":17},{"diffs":[[0,"ket."],[-1,"sessionI"],[1,"i"],[0,"d &&"]],"start1":5178,"start2":5178,"length1":16,"length2":9}]],"length":5576,"saved":false}
{"ts":1362464729378,"patch":[[{"diffs":[[0,"length; j++) {\r\n"],[1,"            console.log(onlineList[i][j].id);\r\n"],[0,"            if ("]],"start1":3327,"start2":3327,"length1":32,"length2":79}]],"length":5623,"saved":false}
{"ts":1362464837547,"patch":[[{"diffs":[[0,"    "],[-1,"console.log"],[1,"if "],[0,"(onl"]],"start1":3351,"start2":3351,"length1":19,"length2":11},{"diffs":[[0,"].id"],[-1,");\r\n            if ("],[1," == socket.id) {\r\n                console.log(\"remove: \" + "],[0,"onli"]],"start1":3374,"start2":3374,"length1":28,"length2":67},{"diffs":[[0,"i][j].id"],[-1," == socket.id) {"],[1,");"],[0,"\r\n      "]],"start1":3448,"start2":3448,"length1":32,"length2":18}]],"length":5640,"saved":false}
{"ts":1362464939061,"patch":[[{"diffs":[[0,"length; j++) {\r\n"],[1,"                console.log(\"remove socket: \" + socket.id);\r\n"],[0,"            if ("]],"start1":3327,"start2":3327,"length1":32,"length2":93}]],"length":5701,"saved":false}
{"ts":1362465044028,"patch":[[{"diffs":[[0,"unction("],[-1,"socket"],[0,") {\r\n   "]],"start1":1870,"start2":1870,"length1":22,"length2":16}]],"length":5695,"saved":false}
{"ts":1362465127081,"patch":[[{"diffs":[[0,"    "],[-1,"    console.log(\"remove socket: \" + socket.id);\r\n            if (onlineList[i][j].id == socket.id) {\r\n                console.log(\"remove: \" + onlineList[i][j].id);"],[1,"if (onlineList[i][j].id == socket.id) {"],[0,"\r\n  "]],"start1":3345,"start2":3345,"length1":172,"length2":47}]],"length":5570,"saved":false}
