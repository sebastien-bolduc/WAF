{"ts":1361910032967,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1361910055745,"patch":[[{"diffs":[[1,"<html>\r\n<head>\r\n<title>Cloud9, NodeJS & Heroku: websockets for all</title>\r\n\r\n<script src=\"/socket.io/socket.io.js\"></script>\r\n\r\n<script>\r\nonerror = function (msg) {\r\nlog(msg);\r\n}\r\nfunction log(msg) {\r\ndocument.getElementById('log').appendChild(document.createTextNode(new Date() + ' ' + msg + '\\n'));\r\n}\r\nfunction status(msg) {\r\nlog(msg);\r\ndocument.getElementById('status').textContent = msg;\r\n}\r\nfunction clearLog() {\r\nvar e = document.getElementById('log');\r\nwhile (e.hasChildNodes()) {\r\ne.removeChild(e.firstChild);\r\n}\r\ne.appendChild(document.createTextNode('Log: \\n'));\r\n}\r\n</script>\r\n\r\n<script>\r\nvar socket = null;\r\nfunction connect() {\r\nlog('Connecting to local server...');\r\nif (socket == null) {\r\nsocket = io.connect(null,{'auto connect': false});\r\nsocket.on('connect', function () {\r\nstatus('Connected');\r\n});\r\n\r\nsocket.on('message', function (data) {\r\nlog(data);\r\n});\r\n}\r\nsocket.socket.connect();\r\n}\r\n\r\nfunction send() {\r\nif (socket && socket.socket.connected) {\r\nsocket.send(document.getElementById('text').value);\r\nlog('>' + document.getElementById('text').value);\r\n} else {\r\nlog('Not connected.');\r\n}\r\n}\r\n\r\nfunction send100() {\r\nif (socket && socket.socket.connected) {\r\nfor (var i = 0; i < 100; i += 1) {\r\nsocket.send('test'+ i);\r\nlog('> test' + i);\r\n}\r\n} else {\r\nlog('Not connected.');\r\n}\r\n}\r\n\r\nfunction update() {\r\nif (socket && socket.socket && socket.socket.transport) {\r\ndocument.getElementById('sessionId').textContent = socket.socket.transport.sessid;\r\ndocument.getElementById('transport').textContent = socket.socket.transport.name;\r\n} else {\r\ndocument.getElementById('sessionId').textContent = '-';\r\ndocument.getElementById('transport').textContent = '-';\r\n}\r\n}\r\nsetInterval(update, 10);\r\n\r\n</script>\r\n</head>\r\n\r\n<body onload=\"connect()\">\r\n<p>\r\n<label style='width:200px;float:left'>Status: <span id=\"status\">Idle</span></label>\r\n</p>\r\n<p>SessionId: <span id=\"sessionId\">-</span></p>\r\n<p>Transport: <span id=\"transport\">-</span></p>\r\n\r\n<p>\r\n<label>Message: <input id=\"text\" type=\"text\" size=\"80\" value=\"\"/></label>\r\n<input type=button value=\"Echo\" onclick=\"send()\">\r\n</p>\r\n\r\n<p>\r\n<input type=button value=\"Spam 100 packets\" onclick=\"send100()\" />\r\n<input type=button value=\"Clear log\" onclick=\"clearLog()\" />\r\n</p>\r\n\r\n<pre id=\"log\">Log:</pre>\r\n</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":2284}]],"length":2284,"saved":false}
{"ts":1361918650416,"patch":[[{"diffs":[[0,"nction (msg) {\r\n"],[-1,""],[0,""],[1,"    "],[0,"log(msg);\r\n}\r\nfu"]],"start1":151,"start2":151,"length1":32,"length2":36},{"diffs":[[0,"g(msg);\r\n}\r\n"],[1,"\r\n"],[0,"function log"]],"start1":173,"start2":173,"length1":24,"length2":26},{"diffs":[[0,"log(msg) {\r\n"],[-1,""],[0,""],[1,"    "],[0,"document.get"]],"start1":196,"start2":196,"length1":24,"length2":28},{"diffs":[[0,"'\\n'));\r\n}\r\n"],[1,"\r\n"],[0,"function sta"]],"start1":304,"start2":304,"length1":24,"length2":26},{"diffs":[[0,"tus(msg) {\r\n"],[1,"    "],[0,"log(msg);\r\nd"]],"start1":330,"start2":330,"length1":24,"length2":28},{"diffs":[[0,"(msg);\r\n"],[1,"    "],[0,"document"]],"start1":349,"start2":349,"length1":16,"length2":20},{"diffs":[[0,"sg;\r\n}\r\n"],[1,"\r\n"],[0,"function"]],"start1":410,"start2":410,"length1":16,"length2":18},{"diffs":[[0,"og() {\r\n"],[1,"    "],[0,"var e = "]],"start1":435,"start2":435,"length1":16,"length2":20},{"diffs":[[0,"log');\r\n"],[1,"    "],[0,"while (e"]],"start1":480,"start2":480,"length1":16,"length2":20},{"diffs":[[0,"s()) {\r\n"],[1,"        "],[0,"e.remove"]],"start1":513,"start2":513,"length1":16,"length2":24},{"diffs":[[0,"hild);\r\n"],[-1,"}\r\n"],[1,"    }\r\n    "],[0,"e.append"]],"start1":551,"start2":551,"length1":19,"length2":27},{"diffs":[[0,"onnect() {\r\n"],[1,"    "],[0,"log('Connect"]],"start1":678,"start2":678,"length1":24,"length2":28},{"diffs":[[0,"...');\r\n"],[1,"    "],[0,"if (sock"]],"start1":725,"start2":725,"length1":16,"length2":20},{"diffs":[[0,"== null) {\r\n"],[1,"        "],[0,"socket = io."]],"start1":748,"start2":748,"length1":24,"length2":32},{"diffs":[[0,"lse});\r\n"],[1,"        "],[0,"socket.o"]],"start1":812,"start2":812,"length1":16,"length2":24},{"diffs":[[0,"n () {\r\n"],[1,"            "],[0,"status('"]],"start1":856,"start2":856,"length1":16,"length2":28},{"diffs":[[0,");\r\n"],[-1,"});\r\n\r\n"],[1,"        });\r\n\r\n        "],[0,"sock"]],"start1":894,"start2":894,"length1":15,"length2":31},{"diffs":[[0," {\r\n"],[-1,"log(data);\r\n});\r\n}\r\n"],[1,"            log(data);\r\n        });\r\n    }\r\n    "],[0,"sock"]],"start1":957,"start2":957,"length1":28,"length2":56},{"diffs":[[0,"n send() {\r\n"],[1,"    "],[0,"if (socket &"]],"start1":1047,"start2":1047,"length1":24,"length2":28},{"diffs":[[0,"nnected) {\r\n"],[1,"        "],[0,"socket.send("]],"start1":1093,"start2":1093,"length1":24,"length2":32},{"diffs":[[0,"').value);\r\n"],[1,"        "],[0,"log('>' + do"]],"start1":1154,"start2":1154,"length1":24,"length2":32},{"diffs":[[0,"alue);\r\n"],[1,"    "],[0,"} else {"]],"start1":1217,"start2":1217,"length1":16,"length2":20},{"diffs":[[0,"\r\n    } else {\r\n"],[1,"        "],[0,"log('Not connect"]],"start1":1223,"start2":1223,"length1":32,"length2":40},{"diffs":[[0," connected.');\r\n"],[1,"    "],[0,"}\r\n}\r\n\r\nfunction"]],"start1":1255,"start2":1255,"length1":32,"length2":36},{"diffs":[[0,"end100() {\r\n"],[1,"    "],[0,"if (socket &"]],"start1":1293,"start2":1293,"length1":24,"length2":28},{"diffs":[[0,"ted) {\r\n"],[1,"        "],[0,"for (var"]],"start1":1343,"start2":1343,"length1":16,"length2":24},{"diffs":[[0,"= 1) {\r\n"],[1,"            "],[0,"socket.s"]],"start1":1387,"start2":1387,"length1":16,"length2":28},{"diffs":[[0,"'+ i);\r\n"],[1,"            "],[0,"log('> t"]],"start1":1424,"start2":1424,"length1":16,"length2":28},{"diffs":[[0," + i);\r\n"],[-1,"}\r\n"],[1,"        }\r\n    "],[0,"} else {"]],"start1":1456,"start2":1456,"length1":19,"length2":31},{"diffs":[[0,"else {\r\n"],[1,"        "],[0,"log('Not"]],"start1":1481,"start2":1481,"length1":16,"length2":24},{"diffs":[[0,"ed.');\r\n"],[1,"    "],[0,"}\r\n}\r\n\r\n"]],"start1":1513,"start2":1513,"length1":16,"length2":20},{"diffs":[[0,"te() {\r\n"],[1,"    "],[0,"if (sock"]],"start1":1546,"start2":1546,"length1":16,"length2":20},{"diffs":[[0,"ansport) {\r\n"],[1,"        "],[0,"document.get"]],"start1":1605,"start2":1605,"length1":24,"length2":32},{"diffs":[[0,"essid;\r\n"],[1,"        "],[0,"document"]],"start1":1701,"start2":1701,"length1":16,"length2":24},{"diffs":[[0,".name;\r\n"],[1,"    "],[0,"} else {"]],"start1":1791,"start2":1791,"length1":16,"length2":20},{"diffs":[[0,"else {\r\n"],[1,"        "],[0,"document"]],"start1":1805,"start2":1805,"length1":16,"length2":24},{"diffs":[[0,"= '-';\r\n"],[1,"        "],[0,"document"]],"start1":1870,"start2":1870,"length1":16,"length2":24},{"diffs":[[0,"= '-';\r\n"],[1,"    "],[0,"}\r\n}\r\nse"]],"start1":1935,"start2":1935,"length1":16,"length2":20}]],"length":2550,"saved":false}
